<!DOCTYPE html>
<html>
<head>
    <title>Caixas de Seleção Dependentes a partir de um Arquivo CSV</title>
</head>
<body>
    <h1>Selecionar um Estado e uma Cidade:</h1>
    <form>
        <label for="estado">Estado:</label>
        <select id="estado" onchange="atualizarCidades()">
            <option value="selecione">Selecione um estado</option>
        </select>

        <label for="cidade">Cidade:</label>
        <select id="cidade">
            <option value="selecione">Selecione um estado primeiro</option>
        </select>
    </form>

    <script>
        const estadoSelect = document.getElementById("estado");
        const cidadeSelect = document.getElementById("cidade");
        let dadosCsv;

        // Carregar os dados do CSV usando fetch
        fetch('cidades.csv')
            .then(response => response.text())
            .then(data => {
                dadosCsv = data.split('\n').slice(1); // Ignorar o cabeçalho

                // Preencher a caixa de seleção de estados
                const estados = new Set();
                dadosCsv.forEach(linha => {
                    const [nome, estado, _] = linha.split(',');
                    estados.add(estado);
                });

                estados.forEach(estado => {
                    adicionarOpcao(estadoSelect, estado);
                });
            });

        function atualizarCidades() {
            cidadeSelect.innerHTML = '';
            const estadoSelecionado = estadoSelect.value;

            if (estadoSelecionado === 'selecione') {
                adicionarOpcao(cidadeSelect, 'Selecione um estado primeiro');
            } else {
                // Preencher a caixa de seleção de cidades com base no estado selecionado
                dadosCsv.forEach(linha => {
                    const [nome, estado, _] = linha.split(',');
                    if (estado === estadoSelecionado) {
                        adicionarOpcao(cidadeSelect, nome);
                    }
                });
            }
        }

        function adicionarOpcao(select, valor) {
            const option = document.createElement('option');
            option.value = valor;
            option.text = valor;
            select.appendChild(option);
        }
    </script>
</body>
</html>
